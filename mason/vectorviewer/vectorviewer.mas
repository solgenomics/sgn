
<%args>
$stock_id
$is_owner
$edit_privs
</%args>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.2/css/dataTables.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/autofill/2.7.0/css/autoFill.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/3.2.3/css/buttons.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/colreorder/2.1.1/css/colReorder.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/datetime/1.5.5/css/dataTables.dateTime.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/5.0.4/css/fixedColumns.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/4.0.3/css/fixedHeader.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/keytable/2.12.1/css/keyTable.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/3.0.4/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/rowgroup/1.5.1/css/rowGroup.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/rowreorder/1.5.0/css/rowReorder.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/scroller/2.4.3/css/scroller.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/searchbuilder/1.8.2/css/searchBuilder.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/searchpanes/2.3.3/css/searchPanes.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/select/3.0.1/css/select.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/staterestore/1.4.1/css/stateRestore.dataTables.min.css" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css" />

 
<!-- <center> -->
<div style="text-align: center;">
    <!DOCTYPE html>
<!-- h1>Vector Viewer</h1  -->

<!-- Add a bit of text -->
<!-- p>Go wild!</p -->

<!-- Add a svg shape. Note that the 'target' class is attributed to the circle -->
<!-- svg> 
  <circle class="target" style="fill: #69b3a2" stroke="black" cx=50 cy=50 r=40></circle>
</svg -->

<!-- Load d3.js> -->
 <!-- script src="https://d3js.org/d3.v4.js"></script -->
 <!-- script src="https://code.jquery.com/jquery-3.6.4.js"></script -->
 <!-- script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script -->
 <!-- <script src="https://cdn.datatables.net/2.3.2/js/dataTables.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/autofill/2.7.0/js/dataTables.autoFill.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/buttons/3.2.3/js/buttons.colVis.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/buttons/3.2.3/js/dataTables.buttons.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/buttons/3.2.3/js/buttons.html5.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/buttons/3.2.3/js/buttons.dataTables.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/colreorder/2.1.1/js/dataTables.colReorder.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/datetime/1.5.5/js/dataTables.dateTime.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/fixedcolumns/5.0.4/js/dataTables.fixedColumns.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/fixedheader/4.0.3/js/dataTables.fixedHeader.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/keytable/2.12.1/js/dataTables.keyTable.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/responsive/3.0.4/js/dataTables.responsive.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/rowgroup/1.5.1/js/dataTables.rowGroup.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/rowreorder/1.5.0/js/dataTables.rowReorder.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/scroller/2.4.3/js/dataTables.scroller.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/searchbuilder/1.8.2/js/dataTables.searchBuilder.min.js"></script> -->
 <!-- <script scr="https://cdn.datatables.net/searchpanes/2.3.3/js/dataTables.searchPanes.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/select/3.0.1/js/dataTables.select.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/staterestore/1.4.1/js/dataTables.stateRestore.min.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/select/3.0.1/js/dataTables.select.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/select/3.0.1/js/select.dataTables.js"></script> -->
 <!-- <script src="https://cdn.datatables.net/datetime/1.5.5/js/dataTables.dateTime.min.js"></script> -->

<!-- script src="/static/documents/vectorviewer.js"></script -->

<!-- & /util/import_javascript.mas, entries => [ "vectorViewer" ] & -->
<& /util/import_javascript.mas,
   classes => ["bootstrap_min", "d3.d3v4Min", "jquery", "jqueryui", "jquery.dataTables-buttons-min", "thickbox", "CXGN.Page.FormattingHelpers", "jquery.cookie", "CXGN.Stock", "jquery.dataTables"] , entries => [ "vectorViewer" ] &>
  
<!-- Add a svg area, empty -->
<div id="vector_div"></div>

<br />
<!-- <button id="saveButton" style="btn"> Save Vector </button> -->
<!-- <button id="loadButton" style="btn"> Load Vector </button> -->
<button id="saveVector" style="btn">Save changes</button>
<!-- button id="loadVector" style="btn"> Load Vector </button -->
<button id="update_vector" style="btn">Update View</button>
<button id="zoomIn" style="btn"> + </button>
<button id="zoomOut" style="btn"> - </button>


<br />
<br />
<br />

<table width="100%"><tr><td>

<h4>Feature list</h4>

<!-- button id="add_feature_button">Add feature</button><br / -->
<table id="vector_table" width="100%" class="display table table-hover table-striped">
<thead><tr><td>No.</td><td>Feature</td><td>Start</td><td>End</td><td>Color</td><td>Orientation</td><td>Actions</td></tr></thead></table>
<br />
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#add_feature_dialog">Add Feature</button>
<br />
<br />
<br />

<!-- Add a svg area, empty -->
</td><td width="160px">&nbsp;</td><td>

<h4>Restriction enzyme list</h4>


<table id="re_sites_table" width="100%" class="display table table-hover table-striped">
<thead><tr><td>RE Site</td><td>Cut Coord</td><td>Actions</td></tr></thead></table>

<br /><br />
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#add_re_dialog">Add restriction enzyme site</button>
</td></tr></table>

<table id="metadata_table" width="40%" class="display table table-hover table-striped">
<thead><tr><td>Vector Name</td><td>Vector length</td><td>Actions</td></tr></thead>
</table>

<table id="sequence_table" width="80%" class="display table table-hover table-striped">
<thead><td>sequence</td></thead>
</table>

<br />
<br />
<br />

</div>

<div id="saveDialog" title="Save Vector!">

<!-- input id="saveInput" ></input -->
To save edits, please click on the Save button.

<button id="dialogSaveButton">Save</button>
<button id="dialogSaveCancelButton">Cancel</button>
</div>

<div id="loadDialog" title="Load Vector">

<input id="loadInput" ></input>

<button id="dialogLoadButton"> Load !!! </button>

</div>

<div id="add_feature_dialog" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add a feature</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table>
	<tr><td>Name</td><td>Start coord</td><td>End coord</td><td>Color</td><td>Orientation</td></tr>
	<tr><td width="200"><input type="text" id="feature_name" class="form-control" /></td>
	  <td width="200" ><input type="text" id="feature_start_coord" class="form-control" /></td>
	  <td width="200"><input type="text" id="feature_end_coord" class="form-control"></td>
	  <td width="200">
	    <select id="feature_color_select" class="form-control">
              <option>red</option>
	      <option>blue</option>
	      <option>green</option>
	      <option>grey</option>
	    </select>
	  </td>
	  <td width="50">
	    <select id="feature_orientation_select" class="form-control">
	      <option>F</option>
	      <option>R</option>
	    </select>
	  </td>
	</tr>
	</table>
	
      </div>
      <div class="modal-footer">
        <button id="add_feature_data_button" type="button" class="btn btn-primary">Add Feature</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id="add_re_dialog" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add a restriction enzyme site</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	<table>
	  <tr><td>Name</td><td>Cut coord</td></tr>
	  <tr><td width="200"><input type="text" id="re_site_name" class="form-control" /></td>
	    <td width="200" ><input type="text" id="re_site_cut_coord" class="form-control" /></td>
	  </tr>
	</table>
	
      </div>
      <div class="modal-footer">
        <button id="add_restriction_site_button" type="button" class="btn btn-primary">Add</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>

jQuery(document).ready(function () {

    var stock_id = <% $stock_id %>;
// alert('There we go... with '+stock_id);
    window.jsMod['vectorViewer'].init(stock_id);
//    alert('Done!');

});


</script>


