
<%args>
$stock_id
$stock_uniquename
$is_obsolete
$is_in_trial
$is_a_parent
</%args>

<& /util/import_javascript.mas, classes => [ 'CXGN.Stock' ] &>

% if ($is_obsolete) {
    <button class="btn btn-primary" id="stock_detail_page_unobsolete_stock">Un-Obsolete This Stock</button>
% } elsif ($is_in_trial) {
%    print "This stock is used in a trial, cannot obsolete";
%} elsif ($is_a_parent) {
%    print "This stock is associated with another stock (e.g., as a parent of another accession), cannot obsolete";
%} elsif ((!$is_in_trial) && (!$is_a_parent)) {
    <button class="btn btn-primary" id="stock_detail_page_obsolete_stock">Obsolete This Stock</button>
% }

<script>

jQuery(document).ready(function () {
    const stock_id = "<%$stock_id%>";
    const stock_name = "<%$stock_uniquename%>";
    jQuery('#stock_detail_page_unobsolete_stock').click(function(){
        unObsoleteStock(stock_id, stock_name);
    });
    jQuery('#stock_detail_page_obsolete_stock').click(function(){
        obsoleteStock(stock_id, stock_name);
    });
});

</script>
