
<%args>
$trait_cv_name
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery', 'jquery.dataTables' ] &>

<& /page/page_title.mas, title => "Trait Search" &>


<table id="trait_search_results" width="100%" class="table table-hover table-striped">
<thead>
  <tr>
    <th>Trait ID</th>
    <th>Trait Name</th>
    <th>Definition</th>
</tr>
</thead>
</table>


<link rel="stylesheet" type="text/css" href="/documents/inc/datatables/jquery.dataTables.css">
<br><br>
<&| /page/info_section.mas, title => 'Copy Results to a List', collapsible=>1, collapsed=>0, subtitle=>'<i>Copy the trait names currently showing in the search results table to a new or exisiting list</i>'&>
<br>
<div style="text-align:right" id="traits_to_list_menu"></div>
<div id="trait_result_names" style="display: none;"></div>
</&>



<script>

jQuery(document).ready(function () {

   var trait_table = jQuery('#trait_search_results').DataTable( {
       'ajax': '/ajax/search/traits?trait_cv_name=<% $trait_cv_name %>'
   });
 
   jQuery('#trait_search_results').on( 'draw.dt', function () {
     var name_links = trait_table.column( 0, {page:'current'} ).data();
     var names = [];

     for (var i = 0; i < name_links.length; i++) { //extract text from anchor tags
       names.push(name_links[i].match(/<a [^>]+>([^<]+)<\/a>/)[1]+'\n');
     }

     jQuery('#trait_result_names').html(names);
     addToListMenu('traits_to_list_menu', 'trait_result_names', {
       listType: 'traits'
     });

   });

});

</script>
