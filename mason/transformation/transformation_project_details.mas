<%args>
$trial_id
$trial_name
$breeding_program_name
$breeding_program_id
$location_name
$country_name
$year
$trial_description
$folder_name
$folder_id
$identifier_prefix
$trial_owner
$tracking_project_id
$autogenerated_name_formats => ()
$name_format
$default_plant_material_id
$default_plant_material_name
</%args>


<div class="row">
    <div class="col-sm-12">
        <table class="table table-hover table-bordered" >
            <tr>
                <td><b>Transformation Project Name</b></td>
                <td>
                    <div id="trial_name">
% if ($trial_name) {
%     print "$trial_name";
% } else {
%     print "<span class='text-danger'>[No Transformation Project Name]</span>";
% }
                    </div>
                </td>
            </tr>

            <tr>
                <td><b>Breeding Program </b></td>
                <td>
                    <span id="breeding_program">
% if ($breeding_program_name) {
%     print "$breeding_program_name";
% }
% else {
%     print "<span class='text-danger'>[No Breeding Program]</span>";
% }
                    </span>
                </td>
            </tr>

            <tr>
                <td><b>Location</b></td>
                <td>
                    <div id="trial_location">
% if ($location_name) {
%     print "$location_name ( $country_name )";
% } else {
%     print "<span class='text-danger'>[No Location]</span>";
% }
                    </div>
                </td>
            </tr>

            <tr>
                <td><b>Year</b></td>
                <td>
                    <div id="trial_year">
% if ($year) {
%    print "$year";
% } else {
%     print "<span class='text-danger'>[No Year]</span>";
% }
                    </div>
                </td>
            </tr>

            <tr><td><b>Description</b></td>
                <td>
% if ($trial_description) {
%     print "<div id='trial_description' style='white-space: pre-wrap;'>$trial_description</div>";
% } else {
%     print "<div id='trial_description'><span class='text-danger'>[No Description]</span></div>";
% }
                </td>
            </tr>

            <tr><td><b>Name Format for Transformants</b></td>
                <td>
                    <div id="name_format">
% if ($name_format) {
%     print "$name_format";
% } else {
%     print "<span class='text-danger'>[Not Set]</span>";
% }
                    </div>
                </td>
            </tr>

            <tr><td><b>Default Plant Material</b></td>
                <td>
% if ($default_plant_material_id) {
      <span id="default_plant_material"><a href="/stock/<%$default_plant_material_id%>/view"><%$default_plant_material_name%></a></span>
% } else {
%     print "<span class='text-danger'>[Not Set]</span>";
% }
                </td>
            </tr>

            <tr>
                <td><b>Folder</b></td>
                <td>
                    <span id="trial_folder_div"><a href="/folder/<% $folder_id %>"><% $folder_name %></a></span>
                    <br/><br/>
                    <button class="btn btn-sm btn-default" style="margin:3px" id="new_folder_dialog_link">New Folder</button> <button class="btn btn-sm btn-default" style="margin:3px" id="open_folder_dialog_link">Change Folder</button>
                </td>
            </tr>

            <tr>
                <td><b>Created by</b></td>
                <td>
                    <div id="trial_owner">
% if ($trial_owner) {
%     print "$trial_owner";
% } else {
%     print "<span class='text-danger'>[N/A]</span>";
% }
                    </div>
                </td>
            </tr>
        </table>

    </div>
</div>
<button class="btn btn-sm btn-default" style="margin:3px" id="set_plant_material_link">Set Default Plant Material</button><button class="btn btn-sm btn-default" style="margin:3px" id="set_autogenerated_names_link">Set Autogenerated Names for Transformants</button>
<br/>
<button class="btn btn-sm btn-primary" style="margin:3px" id="new_transformation_identifier_link">Add New Transformation ID</button><button class="btn btn-sm btn-primary" style="margin:3px" id="upload_transformation_ids_link">Upload New Transformation IDs</button>
<br/>
<button class="btn btn-sm btn-primary" style="margin:3px" id="upload_transgenic_historical_data_link">Upload Transgenic Historical Data</button>
</br>
</br>
% if ($tracking_project_id) {
    <td>
        <a href='/breeders/trial/<%$tracking_project_id%>'><p>Go to Transformation Progress</p></a>
    </td>
% }

<& /transformation/add_transformation_identifier_dialog.mas, trial_id => $trial_id, breeding_program_name => $breeding_program_name, default_plant_material_id => $default_plant_material_id, default_plant_material_name => $default_plant_material_name &>
<& /transformation/upload_transformation_ids_dialog.mas, trial_id => $trial_id, trial_name => $trial_name &>
<& /transformation/set_transformant_names_dialog.mas, trial_id => $trial_id, breeding_program_id => $breeding_program_id, autogenerated_name_formats => $autogenerated_name_formats, breeding_program_name => $breeding_program_name &>
<& /transformation/set_default_plant_material_dialog.mas, project_id => $trial_id, breeding_program_name => $breeding_program_name &>
<& /transformation/upload_transgenic_historical_data_dialog.mas, trial_id => $trial_id, trial_name => $trial_name, default_plant_material_id => $default_plant_material_id, default_plant_material_name => $default_plant_material_name &>

<script>

jQuery(document).ready(function($) {

    jQuery('#new_transformation_identifier_link').click(function() {
        jQuery("#add_transformation_identifier_dialog").modal("show");
    });

});

</script>
