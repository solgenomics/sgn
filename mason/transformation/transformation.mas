<%args>

$transformation_id
$transformation_name => ''
$user_role => undef
$identifier_prefix => ''
$next_new_transformant => undef
$last_number => undef
$plant_material
$vector_construct
$transformation_notes => undef
$updated_status_type => undef
$updated_status_string => undef
$identifier_link => undef
$project_link
$name_format => undef
$program_id
$program_name
$source_info
$stock_type_page
$identifier_id
$identifier_name
$material_id
$material_name
$status_display => undef
$has_associated_transformants => undef
$project_id
$is_a_control => undef
$control_name => undef
$control_id => undef
$control_link => undef
$can_obsolete => undef
$vector_related_genes
$vector_analyzed_tissue_types => undef
$vector_id

</%args>

<& /util/import_javascript.mas, classes => ["jquery", "jqueryui", "thickbox", "CXGN.Page.FormattingHelpers", "jquery.cookie", "CXGN.List", "jquery.dataTables", "CXGN.Stock", "CXGN.Transformation"] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>


<& /page/page_title.mas, title => "Details for transformation '$transformation_name'" &>

<&| /page/info_section.mas, title=>"Details",  collapsible => 1, collapsed=>0 &>

    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-6">
                    <table class="table table-bordered table-hover">
                        <tr><td><b>Project</b></td><td><%$project_link%></td></tr>
                        <tr><td><b>Plant Material</b></td><td><%$plant_material%></td></tr>
                        <tr><td><b>Vector Construct</b></td><td><%$vector_construct%></td></tr>
                        <tr><td><b>Notes</b></td><td><%$transformation_notes%></td></tr>
%if ($is_a_control) {
                        <tr><td><b>Control</b></td><td><%$is_a_control%></td></tr>
%} elsif ($control_link) {
                        <tr><td><b>Control</b></td><td><%$control_link%></td></tr>
%}
                        <tr><td><b>Name Format for Transformants</b></td><td><%$name_format%></td></tr>
%if ($updated_status_type) {
                        <tr><td><b>Status</b></td><td><%$status_display%></td></tr>
                        <tr><td><b>Updated Status Info</b></td><td><%$updated_status_string%></td></tr>
%}
%if ($identifier_link) {
                        <tr><td><b>Tracking Identifier</b></td><td><%$identifier_link%></td></tr>
%}
                    </table>
                </div>
            </div>
%if (!$updated_status_type) {
            <div class="btn-group"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Add New Transformants (Accessions)&nbsp;<span class="caret"></span></button><ul class="dropdown-menu"><li><a href="#" id="add_new_transformants_link">Autogenerated Names</a></li><li><a href="#" id="add_transformants_using_list_link" name="add_transformants_using_list_link">Using a List</a></li><li></ul></div>
%if (!$is_a_control) {
            <div class="btn-group"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Set Transformation Control&nbsp;<span class="caret"></span></button><ul class="dropdown-menu"><li><a href="#" id="select_a_transformation_control_link">Select a Control for this Transformation ID</a></li><li><a href="#" id="set_as_a_control_link" name="set_as_a_control_link">Set this Transformation ID as a Control</a></li><li></ul></div>
%}
%}
        </div>
    </div>
</&>

<& /page/detail_page_2_col_section.mas, info_section_title => "<h4 style='display:inline'>Transgenic Line Details</h4>", info_section_subtitle => 'View number of transgene insertions and qPCR data.',buttons_html => '<button class="btn btn-primary btn-sm" id="upload_qPCR_data_link" style="margin:3px">Upload qPCR Data</button>', icon_class => "glyphicon glyphicon-list-alt", info_section_id => "transgenic_line_details_section", vector_id => $vector_id, transformation_id => $transformation_id, stock_uniquename => $transformation_name, type_name => 'transformation', vector_related_genes => $vector_related_genes, vector_analyzed_tissue_types => $vector_analyzed_tissue_types &>

%if ($control_id) {
<& /page/detail_page_2_col_section.mas, info_section_title => "<h4 style='display:inline'>Control Transgenic Lines</h4>", info_section_subtitle => 'View control transgenic lines of this transformation ID.', icon_class => "glyphicon glyphicon-minus", info_section_id => "control_transgenic_lines_section", control_id => $control_id &>
%}
<& /page/detail_page_2_col_section.mas, info_section_title => "<h4 style='display:inline'>Obsoleted Transgenic Lines</h4>", info_section_subtitle => 'View obsoleted accessions (transgenic lines) and metadata.', buttons_html => '<button class="btn btn-primary btn-sm" id="obsolete_accessions_in_bulk_link" style="margin:3px">Obsolete Accessions in Bulk</button>', icon_class => "glyphicon glyphicon-remove", info_section_id => "obsoleted_accessions_section", transformation_id => $transformation_id, vector_id => $vector_id, program_name => $program_name &>

<& /page/detail_page_2_col_section.mas, info_section_title => "<h4 style='display:inline'>Update Status</h4>", info_section_subtitle => 'Update status of this transformation ID.', icon_class => "glyphicon glyphicon-tag", info_section_id => "transformation_update_status_section", identifier_name => $identifier_name, identifier_id => $identifier_id, material_id => $material_id, material_name => $material_name, updated_status_type => $updated_status_type, program_name => $program_name, stock_type_page => $stock_type_page, user_role => $user_role &>

<& /page/detail_page_2_col_section.mas, info_section_title => "<h4 style='display:inline'>Delete Transformation ID</h4>", info_section_subtitle => '<font color="red">Deletion cannot be undone</font>.', icon_class => "glyphicon glyphicon-trash", info_section_id => "delete_transformation_section", transformation_id => $transformation_id, has_associated_transformants => $has_associated_transformants &>

<& /transformation/add_transformant_names_dialog.mas, transformation_id => $transformation_id, transformation_name => $transformation_name, next_new_transformant => $next_new_transformant, last_number => $last_number, name_format => $name_format, program_id => $program_id, program_name => $program_name, source_info => $source_info &>
<& /transformation/add_transformants_using_list_dialog.mas, transformation_id => $transformation_id, transformation_name => $transformation_name, program_name => $program_name &>
<& /transformation/add_transformation_control_dialog.mas, transformation_id => $transformation_id, transformation_name => $transformation_name, project_id => $project_id, program_name => $program_name, is_a_control => $is_a_control, control_name => $control_name &>

<script>

jQuery(document).ready(function(){

    jQuery('#custom_barcode_link').click(function() {
        location.href = '/tools/label_designer';
    })

});

</script>
